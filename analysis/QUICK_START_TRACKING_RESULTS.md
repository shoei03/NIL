# Method Tracking Results - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ¦‚è¦

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€pandas ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰è¿½è·¡çµæœãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
output/
â”œâ”€â”€ phase2_tracking/
â”‚   â”œâ”€â”€ method_tracking_summary.csv    # ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆé–“ã®å¤‰æ›´ã‚µãƒãƒªãƒ¼
â”‚   â””â”€â”€ method_tracking_details.csv    # ãƒ¡ã‚½ãƒƒãƒ‰å˜ä½ã®è©³ç´°ãªå¤‰æ›´è¨˜éŒ²
â””â”€â”€ ...
```

## ğŸ¯ 3 åˆ†ã§ã‚ã‹ã‚‹ï¼å„ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ–¹

### 1. `method_tracking_summary.csv` - å…¨ä½“åƒã‚’æŠŠæ¡

**ç”¨é€”**: å„ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆé–“ã®å¤‰æ›´ã‚’ä¸€è¦§ã§ç¢ºèª

**ã‚µãƒ³ãƒ—ãƒ«**:

```csv
snapshot_t,snapshot_t1,exact_matches,token_hash_matches,renamed,moved,signature_changed,refactored,added_methods,deleted_methods,total_t,total_t1
87a3370b,71b65ab6,980,99,8,48,28,11,779,196,1370,1953
```

**èª­ã¿æ–¹**:

- `87a3370b â†’ 71b65ab6` ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆé–“ã§:
  - 980 å€‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Œå…¨ã«åŒã˜ (exact_matches)
  - 99 å€‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã¯åŒã˜ã ãŒåå‰ã‚„å ´æ‰€ãŒé•ã† (token_hash_matches)
  - 8 å€‹ãŒãƒªãƒãƒ¼ãƒ ã€48 å€‹ãŒãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã€28 å€‹ãŒã‚·ã‚°ãƒãƒãƒ£å¤‰æ›´
  - 779 å€‹ãŒæ–°è¦è¿½åŠ ã€196 å€‹ãŒå‰Šé™¤

### 2. `method_tracking_details.csv` - è©³ç´°ã‚’èª¿æŸ»

**ç”¨é€”**: å€‹åˆ¥ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å¤‰æ›´ã‚’è©³ã—ãèª¿ã¹ã‚‹

**ã‚µãƒ³ãƒ—ãƒ«**:

```csv
snapshot_t,snapshot_t1,change_type,file_path,method_name,signature,line_range_t,line_range_t1,similarity
87a3370b,71b65ab6,renamed,pandas/core/reshape.py,get_new_values,get_new_values:self:Any:None,130-155,134-160,0.940
```

**èª­ã¿æ–¹**:

- `pandas/core/reshape.py`ã®`get_new_values`ãƒ¡ã‚½ãƒƒãƒ‰ãŒ
- 130-155 è¡Œã‹ã‚‰ 134-160 è¡Œã«ç§»å‹•ã—
- é¡ä¼¼åº¦ 94%ã§ãƒªãƒãƒ¼ãƒ ã•ã‚ŒãŸ

## ğŸ“ˆ å¤‰æ›´ã‚¿ã‚¤ãƒ—ã®æ„å‘³

| ã‚¿ã‚¤ãƒ—              | èª¬æ˜             | é¡ä¼¼åº¦ | ä¾‹                           |
| ------------------- | ---------------- | ------ | ---------------------------- |
| `exact`             | å®Œå…¨ä¸€è‡´         | 100%   | ã‚³ãƒ¼ãƒ‰ãŒå…¨ãå¤‰æ›´ã•ã‚Œã¦ã„ãªã„ |
| `token_hash`        | å®Ÿè£…ãŒåŒä¸€       | 100%   | åŒã˜ã‚³ãƒ¼ãƒ‰ãŒåˆ¥ã®å ´æ‰€ã«ã‚³ãƒ”ãƒ¼ |
| `renamed`           | ãƒªãƒãƒ¼ãƒ          | â‰¥90%   | `old_name` â†’ `new_name`      |
| `moved`             | ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•     | â‰¥90%   | `file1.py` â†’ `file2.py`      |
| `signature_changed` | å¼•æ•°å¤‰æ›´         | å¤‰å‹•   | å¼•æ•°ãŒè¿½åŠ ãƒ»å‰Šé™¤ã•ã‚ŒãŸ       |
| `refactored`        | ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | 70-90% | å®Ÿè£…ãŒéƒ¨åˆ†çš„ã«å¤‰æ›´           |
| `added`             | æ–°è¦è¿½åŠ          | -      | æ–°ã—ãä½œæˆã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰     |
| `deleted`           | å‰Šé™¤             | -      | å‰Šé™¤ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰           |

## ğŸ” ã‚ˆãã‚ã‚‹ä½¿ã„æ–¹

### 1. ç‰¹å®šãƒ¡ã‚½ãƒƒãƒ‰ã®å¤‰é·ã‚’è¿½è·¡

```bash
# groupbyãƒ¡ã‚½ãƒƒãƒ‰ã®å±¥æ­´
grep ",groupby," method_tracking_details.csv
```

### 2. å¤§ããªå¤‰æ›´ãŒã‚ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã™

```python
import pandas as pd

df = pd.read_csv('method_tracking_details.csv')

# ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã®å¤‰æ›´æ•°
file_changes = df['file_path'].value_counts()
print(file_changes.head(10))
```

### 3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’åˆ†æ

```python
# ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã®é¡ä¼¼åº¦åˆ†å¸ƒ
refactored = df[df['change_type'] == 'refactored']
print(refactored['similarity'].describe())
```

## ğŸ“Š ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®çµ±è¨ˆ

### å…¨ä½“ã®æ•°å€¤ï¼ˆä¾‹: phase2_trackingï¼‰

- **ç·ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°**: 32,470 ä»¶
- **ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæ•°**: 9 ãƒšã‚¢ï¼ˆ10 ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰
- **æœŸé–“**: 2009 å¹´ ã€œ 2014 å¹´

### å¤‰æ›´ã‚¿ã‚¤ãƒ—ã®å†…è¨³

```
exact:              23,437ä»¶ (72.1%) - ã»ã¨ã‚“ã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯å¤‰æ›´ã•ã‚Œãªã„
added:               6,964ä»¶ (21.4%) - æ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰ãŒå¤šã„
deleted:             1,109ä»¶ (3.4%)
signature_changed:     435ä»¶ (1.3%)
token_hash:            189ä»¶ (0.6%)
moved:                 157ä»¶ (0.5%)
refactored:            114ä»¶ (0.4%)
renamed:                65ä»¶ (0.2%)
```

### æœ€ã‚‚å¤‰æ›´ãŒå¤šã„ãƒ•ã‚¡ã‚¤ãƒ«

1. `pandas/tests/test_frame.py` - 2,667 å¤‰æ›´
2. `pandas/tests/test_series.py` - 1,581 å¤‰æ›´
3. `pandas/tests/test_groupby.py` - 1,203 å¤‰æ›´
4. `pandas/core/frame.py` - 1,051 å¤‰æ›´
5. `pandas/tests/test_multilevel.py` - 870 å¤‰æ›´

## ğŸ’¡ å®Ÿç”¨ä¾‹

### ã‚±ãƒ¼ã‚¹ 1: API ã®å®‰å®šæ€§åˆ†æ

ã€Œã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒé »ç¹ã«å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿã€

```python
import pandas as pd
df = pd.read_csv('method_tracking_details.csv')

# åŒã˜ãƒ¡ã‚½ãƒƒãƒ‰åã§è¤‡æ•°å›å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’æ¢ã™
method_changes = df.groupby('method_name').size().sort_values(ascending=False)
print(method_changes.head(10))

# çµæœä¾‹:
# __init__    637å›  â† ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯é »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹
# setUp       224å›  â† ãƒ†ã‚¹ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚‚å¤šã„
# __getitem__ 109å›  â† é…åˆ—ã‚¢ã‚¯ã‚»ã‚¹ã®å®Ÿè£…ã¯è¤‡é›‘
```

**ç™ºè¦‹**: `__init__`ã‚„`__getitem__`ãªã©ã®ç‰¹æ®Šãƒ¡ã‚½ãƒƒãƒ‰ã¯é »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹ã€‚ã“ã‚Œã‚‰ã¯è¤‡é›‘ãªæ©Ÿèƒ½ã‚’æŒã¤ãŸã‚ã€ä½•åº¦ã‚‚æ”¹å–„ã•ã‚Œã¦ã„ã‚‹ã€‚

### ã‚±ãƒ¼ã‚¹ 2: å¤§è¦æ¨¡ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®æ¤œå‡º

ã€Œã‚³ãƒ¼ãƒ‰ãŒå¤§å¹…ã«æ›¸ãæ›ãˆã‚‰ã‚ŒãŸç®‡æ‰€ã¯ï¼Ÿã€

```python
# é¡ä¼¼åº¦ãŒä½ã„å¤‰æ›´ï¼ˆå¤§ããªæ›¸ãæ›ãˆï¼‰ã‚’æ¢ã™
df['similarity'] = pd.to_numeric(df['similarity'], errors='coerce')
big_changes = df[(df['similarity'] < 0.75) & (df['similarity'].notna())]

print(f"å¤§è¦æ¨¡ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°: {len(big_changes)}ä»¶")
for _, row in big_changes.iterrows():
    print(f"{row['method_name']} in {row['file_path']}: {row['similarity']:.1%}")

# çµæœä¾‹:
# _sanitize_column in pandas/core/frame.py: 72%
# xs in pandas/core/frame.py: 70%
```

**ç™ºè¦‹**: 24 ä»¶ã®å¤§è¦æ¨¡ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒæ¤œå‡ºã•ã‚ŒãŸã€‚ã“ã‚Œã‚‰ã¯å®Ÿè£…ãŒå¤§å¹…ã«å¤‰æ›´ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã€‚

### ã‚±ãƒ¼ã‚¹ 3: ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã®è¿½è·¡

ã€Œã‚³ãƒ¼ãƒ‰ã®å†æ§‹æˆã§ã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç§»å‹•ã—ãŸã‹ï¼Ÿã€

```python
moved = df[df['change_type'] == 'moved']
print(f"ãƒ•ã‚¡ã‚¤ãƒ«é–“ã‚’ç§»å‹•ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰: {len(moved)}å€‹")

# ã‚ˆãç§»å‹•ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¢ã™
moved_methods = moved.groupby('method_name').size().sort_values(ascending=False)
print(moved_methods[moved_methods > 1])

# çµæœä¾‹:
# __init__         4å›ç§»å‹•  â† ã‚¯ãƒ©ã‚¹ãŒãƒ•ã‚¡ã‚¤ãƒ«é–“ã§ç§»å‹•
# _arith_method    3å›ç§»å‹•  â† ç®—è¡“æ¼”ç®—ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼
```

**ç™ºè¦‹**: 157 å€‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒãƒ•ã‚¡ã‚¤ãƒ«é–“ã‚’ç§»å‹•ã€‚ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®å†æ§‹æˆãŒè¡Œã‚ã‚ŒãŸè¨¼æ‹ ã€‚

### ã‚±ãƒ¼ã‚¹ 4: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®é€²åŒ–

ã€Œãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´æ¯”ç‡ã¯ï¼Ÿã€

```python
test_files = df[df['file_path'].str.contains('/tests/')]
prod_files = df[~df['file_path'].str.contains('/tests/')]

print(f"ãƒ†ã‚¹ãƒˆ: {len(test_files)} ({len(test_files)/len(df)*100:.1f}%)")
print(f"æœ¬ä½“: {len(prod_files)} ({len(prod_files)/len(df)*100:.1f}%)")

# çµæœä¾‹:
# ãƒ†ã‚¹ãƒˆ: 18,654ä»¶ (57.4%)
# æœ¬ä½“:   13,816ä»¶ (42.6%)
```

**ç™ºè¦‹**: å¤‰æ›´ã®åŠåˆ†ä»¥ä¸ŠãŒãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã€‚ãƒ†ã‚¹ãƒˆãŒå……å®Ÿã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã™ã€‚

### ã‚±ãƒ¼ã‚¹ 5: API å¤‰æ›´ã®å½±éŸ¿ç¯„å›²

ã€Œã‚·ã‚°ãƒãƒãƒ£ãŒå¤‰æ›´ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆAPI ã®éäº’æ›å¤‰æ›´ï¼‰ã¯ï¼Ÿã€

```python
sig_changed = df[df['change_type'] == 'signature_changed']
files_affected = sig_changed.groupby('file_path').size().sort_values(ascending=False)

print(f"ã‚·ã‚°ãƒãƒãƒ£å¤‰æ›´: {len(sig_changed)}ä»¶")
print("æœ€ã‚‚å½±éŸ¿ã‚’å—ã‘ãŸãƒ•ã‚¡ã‚¤ãƒ«:")
print(files_affected.head(5))

# çµæœä¾‹:
# pandas/core/frame.py      79ä»¶  â† DataFrameã®APIãŒå¤šãå¤‰æ›´
# pandas/core/internals.py  34ä»¶
```

**ç™ºè¦‹**: 435 å€‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚·ã‚°ãƒãƒãƒ£ãŒå¤‰æ›´ã€‚API ã®å¾Œæ–¹äº’æ›æ€§ã«æ³¨æ„ãŒå¿…è¦ã€‚

## ğŸ“š è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã‚ˆã‚Šè©³ã—ã„æƒ…å ±ã¯ä»¥ä¸‹ã‚’å‚ç…§ï¼š

- [HOW_TO_READ_TRACKING_RESULTS.md](./HOW_TO_READ_TRACKING_RESULTS.md) - å„ã‚«ãƒ©ãƒ ã¨ change_type ã®è©³ç´°èª¬æ˜
- [README.md](./README.md) - åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ã„æ–¹
- [../METHOD_TRACKING.md](../METHOD_TRACKING.md) - æ©Ÿèƒ½ã®å…¨ä½“åƒã¨å®Ÿè£…è©³ç´°

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã‚‹**: `head method_tracking_details.csv`
2. **çµ±è¨ˆã‚’å–ã‚‹**: Python/R ã§ãƒ‡ãƒ¼ã‚¿åˆ†æ
3. **å¯è¦–åŒ–ã™ã‚‹**: å¤‰æ›´ã®æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•ã‚’ä½œæˆ
4. **ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¢ã™**: é »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç‰¹å®š

---

**Tips**: CSV ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¤§ãã„ã®ã§ã€Visual Studio Code ã®[Rainbow CSV](https://marketplace.visualstudio.com/items?itemName=mechatroner.rainbow-csv)æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ã†ã¨è¦‹ã‚„ã™ããªã‚Šã¾ã™ï¼
